{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/games.schema.json",
  "title": "Arcade Platform Games Catalog",
  "type": "object",
  "required": ["games"],
  "additionalProperties": false,
  "properties": {
    "games": {
      "type": "array",
      "items": { "$ref": "#/$defs/game" },
      "minItems": 1,
      "uniqueItems": true
    }
  },
  "$defs": {
    "localizedText": {
      "type": "object",
      "required": ["en", "pl"],
      "additionalProperties": false,
      "properties": {
        "en": { "type": "string", "minLength": 1 },
        "pl": { "type": "string", "minLength": 1 }
      }
    },
    "source": {
      "type": "object",
      "required": ["type"],
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": ["self", "distributor", "placeholder"]
        },
        "page": { "type": "string", "minLength": 1 },
        "embedUrl": { "type": "string", "format": "uri" },
        "distributor": { "type": "string", "minLength": 1 }
      },
      "anyOf": [
        { "required": ["page"] },
        { "required": ["embedUrl"] }
      ]
    },
    "game": {
      "type": "object",
      "required": [
        "id",
        "slug",
        "title",
        "description",
        "category",
        "thumbnail",
        "tags",
        "source"
      ],
      "additionalProperties": false,
      "properties": {
        "id": { "type": "string", "minLength": 1 },
        "slug": { "type": "string", "minLength": 1 },
        "title": { "$ref": "#/$defs/localizedText" },
        "description": { "$ref": "#/$defs/localizedText" },
        "category": {
          "type": "array",
          "items": { "type": "string", "minLength": 1 },
          "minItems": 1
        },
        "thumbnail": { "type": "string", "minLength": 1 },
        "tags": {
          "type": "array",
          "items": { "type": "string", "minLength": 1 },
          "minItems": 1
        },
        "source": { "$ref": "#/$defs/source" }
      }
    }
  }
}
